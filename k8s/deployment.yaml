env:
  - name: DISCOVERY_HOST
    valueFrom:
      configMapKeyRef:
        name: discovery-configmap
        key: DISCOVERY_HOST
  - name: POSTGRES_HOST
    valueFrom:
      configMapKeyRef:
        name: postgres-configmap
        key: POSTGRES_HOST
  - name: POSTGRES_DB
    valueFrom:
      configMapKeyRef:
        name: postgres-configmap
        key: POSTGRES_DB
  - name: POSTGRES_USERNAME
    valueFrom:
      secretKeyRef:
        name: postgres-credentials
        key: POSTGRES_USERNAME
  - name: POSTGRES_PASSWORD
    valueFrom:
      secretKeyRef:
        name: postgres-credentials
        key: POSTGRES_PASSWORD
  - name: SPRING_PROFILES_ACTIVE
    value: "prod"
  - name: MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE
    value: "health,info,prometheus"
    
volumes:
  - name: config-volume
    configMap:
      name: products-circuit-breaker-config
